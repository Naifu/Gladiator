<html>
   <head>
   	<title>REST Authentication Tester</title>
      <meta charset="UTF-8">
	</head>

	<body>
		<div>
			<h1>Login Form</h1>
			<form action="#">
				<input id="username" type="text" name="username" placeholder="username">
				<input id="password" type="password" name="password" placeholder="password">
				
				<span>
					<input type="checkbox" name="checkbox">
					<label for="checkbox">remember</label>
				</span>

				<input type="button" onclick="login()" value="log in">
				<input type="button" onclick="test()" value="Test this">
    		</form>
		</div>
	
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		
		<script type="text/javascript">
			function login () {
				var $ = jQuery.noConflict();
				
				$.ajaxSetup( { async: false } );
				
				$.ajax( {
		            cache			: false,
		            crossDomain	: true,
		            headers		: {
		            	"client_key": "f80ebc87-ad5c-4b29-9366-5359768df5a1"
		            },
		            dataType		: "json",
		            url			: "/com.enkai.ms.auth/rest/enkai-resource/login/",
		            type			: "POST",
		            data			: {
		                "username": $("#username").val(),
		                "password": $("#password").val()
		            },
		            success: function( jsonObj, textStatus, xhr ) {
		            	sessionStorage.auth_token = jsonObj.auth_token;
							window.location = "test.html";
		            },
		            error: function( xhr, textStatus, errorThrown ) {
							console.log( "HTTP Status: " + xhr.status );
		               console.log( "Error textStatus: " + textStatus );
		               console.log( "Error thrown: " + errorThrown );
		               alert (xhr.responseJSON.message);
		            }
		        } );
			} 
			
			function test () {
				var $ = jQuery.noConflict();
				
				$.ajaxSetup( { async: false } );
				
				$.ajax( {
		            cache			: false,
		            crossDomain	: true,
		            headers		: {
		            	"client_key"	: "f80ebc87-ad5c-4b29-9366-5359768df5a1",
		            	"auth_token"	: sessionStorage.auth_token
		            },
		            dataType		: "json",
	               url			: "//localhost:8080/com.enkai.ms.auth/rest/enkai-resource/test-get-method/",
	               type			: "GET",
	               success		: function( jsonObj, textStatus, xhr ) {
							var htmlContent = $( "#logMsgDiv" ).html( ) + "<p>Test Get Methode nach Login. JSON Message: " + jsonObj.message + "</p>";
	                  alert( htmlContent );
	               },
	               error: function( xhr, textStatus, errorThrown ) {
	               	console.log( "HTTP Status: " + xhr.status );
	                  console.log( "Error textStatus: " + textStatus );
	                  console.log( "Error thrown: " + errorThrown );
						}
		        } );
			} 
		</script>
	</body>
</html>